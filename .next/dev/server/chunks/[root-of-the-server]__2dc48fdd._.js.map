{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Skrimer/Desktop/WEB/testops-site/app/api/generation/automation/api/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: Request) {\r\n  // 1. Имитируем задержку сети (как будто бэкенд думает)\r\n  await new Promise((resolve) => setTimeout(resolve, 2000));\r\n\r\n  // 2. Генерируем 15 фейковых файлов с кодом\r\n  const mockFiles = Array.from({ length: 15 }, (_, i) => {\r\n    const num = i + 1;\r\n    return {\r\n      filename: `test_scenario_${num}_payment.py`,\r\n      code: `import pytest\r\nimport allure\r\nfrom pages.payment_page import PaymentPage\r\nfrom data.users import UserData\r\n\r\n@allure.feature(\"Payment Functionality - Case ${num}\")\r\n@allure.story(\"User can pay with credit card\")\r\nclass TestPaymentScenario${num}:\r\n    \r\n    @allure.severity(allure.severity_level.CRITICAL)\r\n    @allure.title(\"Verify payment processing for Order #${num}\")\r\n    def test_payment_success_${num}(self, browser):\r\n        \"\"\"\r\n        Test Description:\r\n        1. Login as user\r\n        2. Add item ${num} to cart\r\n        3. Proceed to checkout\r\n        4. Enter valid card details\r\n        \"\"\"\r\n        page = PaymentPage(browser)\r\n        page.open()\r\n        \r\n        # Step 1: Login\r\n        page.login(UserData.standard_user)\r\n        \r\n        # Step 2: Add to cart\r\n        page.add_item_to_cart(item_id=${num})\r\n        \r\n        # Step 3: Checkout\r\n        page.click_checkout()\r\n        \r\n        # Assertion\r\n        assert page.is_payment_successful(), \"Payment failed for item ${num}\"\r\n        \r\n        # Some extra lines to verify scroll\r\n        # print(\"Test ${num} finished\")\r\n        # ...\r\n`\r\n    };\r\n  });\r\n\r\n  // 3. Возвращаем ответ в том формате, который ждет наш Page.tsx\r\n  return NextResponse.json({\r\n    test_files: mockFiles\r\n  });\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAY;IACrC,uDAAuD;IACvD,MAAM,IAAI,QAAQ,CAAC,UAAY,WAAW,SAAS;IAEnD,2CAA2C;IAC3C,MAAM,YAAY,MAAM,IAAI,CAAC;QAAE,QAAQ;IAAG,GAAG,CAAC,GAAG;QAC/C,MAAM,MAAM,IAAI;QAChB,OAAO;YACL,UAAU,CAAC,cAAc,EAAE,IAAI,WAAW,CAAC;YAC3C,MAAM,CAAC;;;;;8CAKiC,EAAE,IAAI;;yBAE3B,EAAE,IAAI;;;wDAGyB,EAAE,IAAI;6BACjC,EAAE,IAAI;;;;oBAIf,EAAE,IAAI;;;;;;;;;;;sCAWY,EAAE,IAAI;;;;;;sEAM0B,EAAE,IAAI;;;sBAGtD,EAAE,IAAI;;AAE5B,CAAC;QACG;IACF;IAEA,+DAA+D;IAC/D,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,YAAY;IACd;AACF"}}]
}