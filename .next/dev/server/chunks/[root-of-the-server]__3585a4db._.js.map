{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Skrimer/Desktop/WEB/testops-site/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma = globalForPrisma.prisma || new PrismaClient();\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\r\n\r\nexport default prisma;\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6IAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG;uCAErD"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Skrimer/Desktop/WEB/testops-site/app/api/register/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\nimport { prisma } from '@/lib/prisma';\r\nimport bcrypt from 'bcryptjs';\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const { email, password, username } = await req.json();\r\n\r\n    if (!email || !password) {\r\n      return NextResponse.json(\r\n        { message: 'Email и пароль обязательны' },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    // Проверяем, есть ли уже такой юзер\r\n    const existingUser = await prisma.user.findUnique({\r\n      where: { email },\r\n    });\r\n\r\n    if (existingUser) {\r\n      return NextResponse.json(\r\n        { message: 'Пользователь с таким email уже существует' },\r\n        { status: 409 }\r\n      );\r\n    }\r\n\r\n    // Хешируем пароль\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    // Создаем пользователя\r\n    const newUser = await prisma.user.create({\r\n      data: {\r\n        email,\r\n        password: hashedPassword,\r\n        username: username || email.split('@')[0],\r\n      },\r\n    });\r\n\r\n    return NextResponse.json(\r\n      { message: 'Пользователь создан', user: { id: newUser.id, email: newUser.email, username: newUser.username } },\r\n      { status: 201 }\r\n    );\r\n  } catch (error) {\r\n    console.error('Registration error:', error);\r\n    return NextResponse.json(\r\n      { message: 'Ошибка сервера при регистрации' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,MAAM,IAAI,IAAI;QAEpD,IAAI,CAAC,SAAS,CAAC,UAAU;YACvB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA6B,GACxC;gBAAE,QAAQ;YAAI;QAElB;QAEA,oCAAoC;QACpC,MAAM,eAAe,MAAM,yHAAM,CAAC,IAAI,CAAC,UAAU,CAAC;YAChD,OAAO;gBAAE;YAAM;QACjB;QAEA,IAAI,cAAc;YAChB,OAAO,gJAAY,CAAC,IAAI,CACtB;gBAAE,SAAS;YAA4C,GACvD;gBAAE,QAAQ;YAAI;QAElB;QAEA,kBAAkB;QAClB,MAAM,iBAAiB,MAAM,8IAAM,CAAC,IAAI,CAAC,UAAU;QAEnD,uBAAuB;QACvB,MAAM,UAAU,MAAM,yHAAM,CAAC,IAAI,CAAC,MAAM,CAAC;YACvC,MAAM;gBACJ;gBACA,UAAU;gBACV,UAAU,YAAY,MAAM,KAAK,CAAC,IAAI,CAAC,EAAE;YAC3C;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;YAAuB,MAAM;gBAAE,IAAI,QAAQ,EAAE;gBAAE,OAAO,QAAQ,KAAK;gBAAE,UAAU,QAAQ,QAAQ;YAAC;QAAE,GAC7G;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAiC,GAC5C;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}